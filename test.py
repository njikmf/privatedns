import requests
import threading
import time
import datetime

ssllist='''
169.57.1.85:8123
169.57.1.84:80
103.73.194.2:80
170.155.5.235:8080
140.238.42.240:3128
123.231.238.221:80
113.20.118.244:8080
195.168.98.98:8000
8.214.41.50:80
5.180.130.90:80
167.172.173.210:42031
14.54.27.37:4003
93.157.163.66:35081
139.224.15.192:22
120.78.139.255:22
80.191.162.2:514
85.25.117.134:5566
8.217.112.99:59394
41.164.68.194:8080
95.0.90.243:8080
47.103.18.139:7890
218.149.163.134:8080
166.111.81.125:7890
101.132.134.206:22
120.55.190.250:3128
59.63.118.227:41979
1.180.156.226:65001
87.245.209.110:8080
20.47.108.204:8888
43.228.125.189:8080
72.80.242.101:8080
144.217.7.157:5566
109.75.145.152:15392
181.192.2.233:53281
93.91.112.247:41258
213.230.69.193:3128
176.119.158.31:8118
159.65.69.186:9300
124.156.174.58:10000
187.44.167.78:60786
158.69.72.138:9300
103.250.166.12:6666
103.143.197.44:8080
202.141.233.166:48995
38.101.122.186:999
27.72.147.22:40009
66.94.120.161:443
51.15.8.75:3738
103.73.102.174:60080
167.71.199.228:8080
103.133.24.97:8181
89.218.186.134:3128
165.154.92.146:8888
24.217.192.131:57273
202.142.126.6:8080
223.99.57.242:8111
188.156.240.240:8118
51.79.50.46:9300
190.112.137.81:8085
103.250.166.17:6666
186.159.3.193:56861
178.219.37.70:8080
167.114.174.168:11115
54.37.160.88:1080
54.37.160.89:1080
116.68.161.54:55443
176.110.121.90:21776
85.195.104.71:80
147.135.134.57:9300
101.53.154.137:2008
103.255.241.190:55443
202.77.120.38:57965
202.154.180.53:46717
14.162.180.140:8080
103.241.227.110:6666
118.99.104.135:8080
50.232.250.157:8080
113.160.206.37:55138
202.158.15.146:55667
161.202.226.194:80
178.217.172.206:55443
152.204.128.46:33047
146.196.40.109:8181
217.6.236.35:3128
54.37.160.93:1080
5.9.89.187:808
54.159.139.112:9090
104.149.3.3:8080
139.224.117.194:22
119.81.189.194:80
200.116.198.177:35184
80.65.28.57:30962
81.163.41.47:41258
195.158.3.198:3128
102.68.129.30:8080
213.32.75.44:9300
45.170.148.76:56437
91.207.147.243:38472
37.232.183.74:53281
103.216.82.19:6666

'''

task=list()
res=dict()
url='https://twitter.com/explore'

def test_ssl(i):
    if len(i)<4:
        return
    cur=time.time_ns()
    try:
        response=requests.request(url=url,proxies={'https':i},method='GET',timeout=11)
    except:
        pass
    else:
        #print("{} {}".format(i,response.status_code))
        if 200==response.status_code and len(response.text)>300:
            res[i]=response.elapsed

def save(data):
    f=open('ssl.txt','w')
    f.write(str(datetime.datetime.now()))
    f.write('\n')
    for k,v in data.items():
        f.write(k)
        f.write(' \t')
        f.write(str(v))
        f.write('\n')
    
def start():
    sslarray=ssllist.split('\n')
    for i in sslarray:
        j=threading.Thread(target=test_ssl,args=(i,))
        task.append(j)
        j.start()
    for i in task:
        i.join()

    save(res)
    for i,j in res.items():
        print(i,j)

start()