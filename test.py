import requests
import threading
import time
import datetime

ssllist='''
81.163.41.47:41258
47.242.119.110:59394
109.75.145.152:15392
161.202.226.194:80
41.65.236.44:1981
20.47.108.204:8888
169.57.1.84:80
169.57.1.85:8123
93.180.221.205:8080
178.134.155.82:48146
41.65.236.43:1981
45.229.205.116:55555
82.202.160.205:8118
193.34.21.4:55277
89.171.41.90:6969
167.172.173.210:42031
123.231.238.221:80
194.233.69.38:443
158.181.21.247:8081
85.25.196.218:5566
195.158.14.118:3128
138.201.120.214:1080
210.56.22.92:8080
8.217.112.99:59394
89.218.186.134:3128
181.129.138.114:30838
96.9.77.71:8080
181.129.183.19:53281
12.218.209.130:53281
46.8.247.3:50967
203.29.26.241:8080
144.217.7.157:5566
195.182.152.238:38178
154.236.184.73:1976
87.245.209.110:8080
193.41.88.58:53281
85.25.99.106:5566
52.168.142.236:8118
113.252.11.250:8118
94.141.117.1:8080
103.119.144.5:55443
46.246.86.8:8888
129.226.125.228:31100
96.36.8.51:8080
85.25.196.76:5566
94.130.169.235:32006
47.241.8.6:23511
20.105.253.176:8080
38.101.122.186:999
218.149.163.134:8080
139.255.128.114:8080
103.255.241.190:55443
175.100.72.95:57938
152.67.198.97:8080
134.119.206.110:1080
116.254.116.99:8080
66.94.120.161:443
188.65.237.30:50333
171.244.140.121:8118
197.210.217.66:34808
203.207.52.206:8085
187.62.191.3:61456
213.230.90.106:3128
149.56.96.252:9300
213.222.34.200:53281
188.163.170.130:41209
77.238.129.14:55443
186.103.179.50:60080
134.119.206.107:1080
200.54.194.12:53281
41.186.44.106:3128
85.15.152.39:3128
119.81.189.194:80
77.50.104.110:3128
114.130.39.62:8080
138.204.68.42:1337
103.103.212.222:53281
66.94.97.238:443
43.132.197.151:443
185.175.119.206:36442
85.25.132.27:5566
195.182.133.107:3128
89.219.25.42:3128
43.228.125.189:8080
177.104.125.173:55443
94.136.197.126:3128
93.117.72.27:43631
187.87.189.252:55443
134.119.206.106:1080
134.119.206.108:1080
5.58.33.187:55507
103.12.160.85:31231
183.172.49.13:7890
171.224.229.183:4004
134.119.206.109:1080
41.65.236.39:1981
65.20.191.201:80
61.29.96.146:80
103.143.197.44:8080
81.91.144.190:55443

'''

task=list()
res=dict()
url='https://twitter.com/explore'

def test_ssl(i):
    if len(i)<4:
        return
    cur=time.time_ns()
    try:
        response=requests.request(url=url,proxies={'https':i},method='GET',timeout=11)
    except:
        pass
    else:
        #print("{} {}".format(i,response.status_code))
        if 200==response.status_code and len(response.text)>300:
            res[i]=response.elapsed

def save(data):
    f=open('ssl.txt','w')
    f.write(str(datetime.datetime.now()))
    f.write('\n')
    for k,v in data.items():
        f.write(k)
        f.write(' \t')
        f.write(str(v))
        f.write('\n')
    
def start():
    sslarray=ssllist.split('\n')
    for i in sslarray:
        j=threading.Thread(target=test_ssl,args=(i,))
        task.append(j)
        j.start()
    for i in task:
        i.join()

    save(res)
    for i,j in res.items():
        print(i,j)

start()